<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>抽卡</title>
  <style>
    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, "Segoe UI", Arial, "Noto Sans TC", sans-serif;
      background:#0f1220;
      color:#fff;
      height:100vh;
      overflow:hidden;
    }

    /* 版面：用固定定位把四角與中央元素釘住 */
    .hud{
      position:relative;
      width:100%;
      height:100%;
    }

    /* 右上角資源：寶石在左、金幣在右；每個資源「圖在左、數字在右」 */
    .resources{
      position:absolute;
      top:16px;
      right:16px;
      display:flex;
      gap:14px;           /* 兩種資源間距 */
      align-items:center;
      justify-content:flex-end;
      padding:10px 12px;
      background:rgba(255,255,255,0.08);
      border:1px solid rgba(255,255,255,0.12);
      border-radius:14px;
      backdrop-filter: blur(6px);
    }
    .res{
      display:flex;
      align-items:center;
      gap:8px;            /* 圖示在左，數字在右 */
      padding:6px 10px;
      border-radius:12px;
      background:rgba(0,0,0,0.18);
    }
    .res img{
      width:22px;
      height:22px;
      object-fit:contain;
      filter: drop-shadow(0 2px 6px rgba(0,0,0,0.35));
    }
    .res .num{
      font-weight:700;
      letter-spacing:0.5px;
      min-width:52px;
      text-align:right;
    }

    /* 左上角選單：貓、腳色（由上而下） */
    .menu{
      position:absolute;
      top:16px;
      left:16px;
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    .menu button{
      width:110px;
      padding:10px 12px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,0.18);
      background:rgba(255,255,255,0.10);
      color:#fff;
      font-weight:700;
      cursor:pointer;
    }
    .menu button:hover{ background:rgba(255,255,255,0.16); }

    /* 左下角返回主頁 */
    .back{
      position:absolute;
      left:16px;
      bottom:16px;
    }
    .back a{
      display:inline-block;
      padding:10px 14px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,0.18);
      background:rgba(255,255,255,0.10);
      color:#fff;
      text-decoration:none;
      font-weight:700;
    }
    .back a:hover{ background:rgba(255,255,255,0.16); }

    /* 中央偏右：抽取物圖片 */
    .draw-stage{
      position:absolute;
      top:50%;
      left:50%;                 /* 偏右 */
      transform:translate(-50%,-50%);
      width:min(360px, 70vw);
      aspect-ratio: 1 / 1;
      display:grid;
      place-items:center;
      border-radius:24px;
      background:rgba(255,255,255,0.06);
      border:1px solid rgba(255,255,255,0.12);
      box-shadow: 0 12px 40px rgba(0,0,0,0.35);
    }
    .draw-stage img{
      width:78%;
      height:78%;
      object-fit:contain;
      filter: drop-shadow(0 12px 18px rgba(0,0,0,0.55));
    }

    /* 右下角：抽1次、抽10次 */
    .draw-actions{
      position:absolute;
      right:16px;
      bottom:16px;
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    .draw-actions button{
      width:140px;
      padding:12px 14px;
      border-radius:16px;
      border:1px solid rgba(255,255,255,0.18);
      background:rgba(255,255,255,0.12);
      color:#fff;
      font-weight:800;
      cursor:pointer;
    }
    .draw-actions button:hover{ background:rgba(255,255,255,0.18); }
    .draw-actions button.primary{
      background:rgba(120, 90, 255, 0.35);
      border-color: rgba(120, 90, 255, 0.55);
    }
    .draw-actions button.primary:hover{
      background:rgba(120, 90, 255, 0.45);
    }

    /* 小螢幕微調 */
    @media (max-width:520px){
      .menu button{ width:96px; }
      .draw-actions button{ width:128px; }
      .draw-stage{ left:50%; }
    }
    /* ===== 抽卡結果面板（正中央、橫跨全螢幕） ===== */
    .overlay{
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.65);
    display:flex;
    align-items:center;
    justify-content:center;
    z-index:999;
    }

    .overlay.hidden{ display:none; }

    .result-panel{
    width:100vw;            /* 從最左到最右 */
    max-width:100vw;
    background:rgba(20, 22, 40, 0.96);
    border-top:1px solid rgba(255,255,255,0.18);
    border-bottom:1px solid rgba(255,255,255,0.18);
    padding:18px 16px 14px;
    }

    .result-title{
    text-align:center;
    font-weight:900;
    font-size:22px;
    margin:0 0 12px;
    }

    .prize-area{
    display:grid;
    grid-template-columns: repeat(auto-fit, minmax(90px, 1fr));
    gap:12px;
    align-items:center;
    justify-items:center;
    padding:10px 0 6px;
    }

    .prize-card{
    width:100%;
    max-width:120px;
    border:1px solid rgba(255,255,255,0.14);
    background:rgba(255,255,255,0.06);
    border-radius:14px;
    padding:10px;
    display:grid;
    place-items:center;
    }

    .prize-card img{
    width:72px;
    height:72px;
    object-fit:contain;
    filter: drop-shadow(0 10px 14px rgba(0,0,0,0.45));
    }

    .power-line{
    text-align:center;
    font-weight:900;
    margin-top:8px;
    font-size:18px;
    }

    .result-actions{
    margin-top:12px;
    display:flex;
    justify-content:center;
    }
    .result-actions button{
    padding:10px 18px;
    border-radius:14px;
    border:1px solid rgba(255,255,255,0.18);
    background:rgba(255,255,255,0.12);
    color:#fff;
    font-weight:800;
    cursor:pointer;
    }
    .result-actions button:hover{ background:rgba(255,255,255,0.18); }

    .menu button.active{
      background:rgba(120, 90, 255, 0.45);
      border-color: rgba(120, 90, 255, 0.65);
    }
    .cost-line{
      text-align:center;
      font-weight:900;
      margin-top:6px;
      font-size:18px;
    }




    
  </style>
</head>
<body>
  <div class="hud">

    <!-- 左上角：選單 -->
    <div class="menu">
        <button id="btnCat" type="button" onclick="setPool('cat')">貓</button>
        <button id="btnRole" type="button" onclick="setPool('role')">角色</button>
    </div>


    <!-- 右上角：資源（寶石在左，金幣在右） -->
    <div class="resources" aria-label="resources">
      <!-- 寶石 -->
      <div class="res" title="寶石">
        <img src="https://cdn-icons-png.flaticon.com/512/3523/3523063.png" alt="寶石">
        <div class="num" id="gemNum">120</div>
      </div>

      <!-- 金幣（在寶石右邊） -->
      <div class="res" title="金幣">
        <img src="https://cdn-icons-png.flaticon.com/512/138/138292.png" alt="金幣">
        <div class="num" id="goldNum">3500</div>
      </div>
    </div>

    <!-- 中央偏右：抽到的物品 -->
    <div class="draw-stage">
      <img id="drawImg"
           src="https://img.88icon.com/download/jpg/20201109/d032693e21318af1dcabbf7a388f8057_512_512.jpg!bg"
           alt="抽取物" />
    </div>

    <!-- 左下角：返回主頁 -->
    <div class="back">
      <a href="index.html">← 返回主頁</a>
    </div>

    <!-- 右下角：抽卡按鈕 -->
    <div class="draw-actions">
      <button class="primary" type="button" onclick="draw(1)">抽 1 次</button>
      <button type="button" onclick="draw(10)">抽 10 次</button>
    </div>

  </div>

  <!-- 抽卡結果 Overlay（HTML，不要放進 script） -->
<div id="resultOverlay" class="overlay hidden" role="dialog" aria-modal="true">
  <div class="result-panel">
    <h2 class="result-title">抽卡結果</h2>

    <div id="prizeArea" class="prize-area"></div>
    <div class="cost-line">花費寶石 <span id="costNum">0</span></div>


    <div class="power-line">戰鬥力 <span id="powerNum">0</span></div>

    <div class="result-actions">
      <button type="button" onclick="closeResult()">確定</button>
    </div>
  </div>
</div>

<script>
  // 資源
  let gems = 120;
  let gold = 3500;

  function renderRes(){
    document.getElementById("gemNum").textContent = gems;
    document.getElementById("goldNum").textContent = gold;
  }

  // 兩個卡池：貓 / 腳色
  const pools = {
    cat: [
      { img:"https://cdn-icons-png.flaticon.com/512/616/616430.png", power: 12 },
      { img:"https://cdn-icons-png.flaticon.com/512/1998/1998610.png", power: 18 },
      { img:"https://cdn-icons-png.flaticon.com/512/2201/2201247.png", power: 25 }
    ],
    role: [
      { img:"https://w7.pngwing.com/pngs/26/781/png-transparent-knight-illustration-iron-armor-electronics-shield-iron-thumbnail.png", power: 35 },
      { img:"https://w7.pngwing.com/pngs/831/811/png-transparent-sword-weapon-medieval-fantasy-weapon-thumbnail.png", power: 20 },
      { img:"https://w7.pngwing.com/pngs/506/728/png-transparent-shield-illustration-shield-weapon-medieval-fantasy-weapon-thumbnail.png", power: 15 }
    ]
  };

  // 目前使用哪個卡池（預設貓）
  let currentPoolKey = "cat";

  // 切換卡池（要搭配 HTML 按鈕 id：btnCat / btnRole）
  function setPool(key){
    currentPoolKey = key;

    // 按鈕高亮
    const btnCat = document.getElementById("btnCat");
    const btnRole = document.getElementById("btnRole");
    if (btnCat && btnRole){
      btnCat.classList.toggle("active", key === "cat");
      btnRole.classList.toggle("active", key === "role");
    }

    // 中央展示圖換成該卡池第一張
    document.getElementById("drawImg").src = pools[currentPoolKey][0].img;
  }

  // 顯示抽卡結果（✅ 你剛剛那串 forEach 內容就是要放這裡）
  function openResult(results, cost){
  const overlay = document.getElementById("resultOverlay");
  const prizeArea = document.getElementById("prizeArea");
  const powerNum = document.getElementById("powerNum");
  const costNum = document.getElementById("costNum");
  const title = document.querySelector(".result-title");

  title.textContent = `抽卡結果（${currentPoolKey === "cat" ? "貓卡池" : "角色卡池"}）`;

  costNum.textContent = cost;   // ✅ 顯示本次花費

  prizeArea.innerHTML = "";
  let totalPower = 0;

  results.forEach(r => {
    totalPower += r.power;

    const card = document.createElement("div");
    card.className = "prize-card";

    const img = document.createElement("img");
    img.src = r.img;
    img.alt = "獎品";

    card.appendChild(img);
    prizeArea.appendChild(card);
  });

  powerNum.textContent = totalPower;
  overlay.classList.remove("hidden");
}


  function closeResult(){
    document.getElementById("resultOverlay").classList.add("hidden");
  }

  function draw(times){
    const cost = (times === 10) ? 90 : 10;
    if (gems < cost){
      alert("寶石不足！");
      return;
    }
    gems -= cost;

    // ✅ 用目前卡池
    const pool = pools[currentPoolKey];
    const results = [];

    for (let i = 0; i < times; i++){
      const picked = pool[Math.floor(Math.random() * pool.length)];
      results.push(picked);
    }

    // 中央偏右那張也更新成最後抽到的
    document.getElementById("drawImg").src = results[results.length - 1].img;

    renderRes();
    openResult(results, cost);
  }

  // 初始化
  setPool("cat");
  renderRes();
</script>


</body>
</html>
